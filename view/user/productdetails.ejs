<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Product detail page</title>
<label for=""></label>
  <!-- 
    - custom css link
  -->
  <link rel="stylesheet" href="/css/usercss/productdetails.css">

  <!-- 
    - google font link
  -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Kumbh+Sans:wght@400;500;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css" integrity="sha512-SnH5WK+bZxgPHs44uWIX+LLJAJ9/2PkPKZ5QiAj6Ta86w+fsb2TkcmfRyVX3pBnMFcV7oQPJkl9QevSCWr3W6A==" crossorigin="anonymous" referrerpolicy="no-referrer" />

<style>

  .heart{

    position:absolute;
    font-size: 22px;
    left:350px;
    /* border: 2px solid black; */
  
  }
</style>


</head>


<body>

  <!-- 
    - #HEADER
  -->
  <header class="header">
    <div class="container">

      <button class="nav-open-btn" aria-label="open menu" data-nav-toggler>
        <ion-icon name="menu-outline" aria-hidden="true"></ion-icon>
      </button>

      <a href="/userhome" class="logo">
        <h1 class="text-primary display-6">Pe-Cart</h1>
      </a>

      <nav class="navbar" data-navbar>

        <button class="nav-close-btn" aria-label="close menu" data-nav-toggler>
          <ion-icon name="close-outline" aria-hidden="true"></ion-icon>
        </button>

        <ul class="navbar-list">

          <li>
            <a href="/userhome" class="navbar-link">Home</a>
          </li>

          <li>
            <a href="#" class="navbar-link">Shop</a>
          </li>

          <li>
            <a href="#" class="navbar-link">Shop Detail</a>
          </li>

          <li>
            <a href="#" class="navbar-link">Contact</a>
          </li>


        </ul>

      </nav>

      <div class="header-action">

       <a href="/cart"><button class="header-action-btn" aria-label="add to cart">
          <ion-icon name="bag-handle-outline" aria-hidden="true"></ion-icon>
        </button></a>

        <button class="profile-btn" aria-label="profile">
          <img src="./assets/images/profile.png" width="100" height="100" alt="profile" class="img">
        </button>

      </div>

      <div class="overlay" data-overlay data-nav-toggler></div>

    </div>
  </header>





  <main>
    <article>

      <!-- 
        - #PRODUCT
      -->
      <section class="section product" aria-label="product">
        <div class="container">




          <div class="product-slides"  onclick="addtoheart('<%=product.id%>')" >

            <% if(wish) { %>
              <% let check = product.id; %>
              <% console.log(check); %>
            
              <% let p = wish.products.find(product => product.equals(check)) !== undefined; %>
              <% console.log(p); %>
            
              <% if(p) { %>
                <i class="fa-solid fa-heart heart" style="color:red;"></i>
              <% } else { %>
                <i class="fa-solid fa-heart heart" style="color:none;"></i>
              <% } %>
            <% } else { %>
              <i class="fa-solid fa-heart heart" style="color:none;"></i>
            <% } %>
            

            <div class="slider-banner" data-slider>
              <figure class="product-banner">
                <img src="/image/<%= product.image[0]%>" width="600" height="600" loading="lazy" alt="Nike Sneaker"
                  class="img-cover">
              </figure>

              <figure class="product-banner">
                <img src="/image/<%= product.image[1]%>" width="600" height="600" loading="lazy" alt="Nike Sneaker"
                  class="img-cover">
              </figure>

              <figure class="product-banner">
                <img src="/image/<%= product.image[2]%>" width="600" height="600" loading="lazy" alt="Nike Sneaker"
                  class="img-cover">
              </figure>

              <figure class="product-banner">
                <img src="/image/<%= product.image[3]%>" width="600" height="600" loading="lazy" alt="Nike Sneaker"
                  class="img-cover">
              </figure>
            </div>

            <button class="slide-btn prev" aria-label="Previous image" data-prev>
              <ion-icon name="chevron-back" aria-hidden="true"></ion-icon>
            </button>

            <button class="slide-btn next" aria-label="Next image" data-next>
              <ion-icon name="chevron-forward" aria-hidden="true"></ion-icon>
            </button>

          </div>

          <div class="product-content">

            <p class="product-subtitle"><%=product.name %></p>

            <h1 class="h1 product-title">Fall Limited Edition Sneakers</h1>

            <p class="product-text">
              <%= product.description %>
            </p>

            <div class="wrapper">

              <span class="price" data-total-price>₹<%= product.prizePercenttage %></span>

              <span class="badge"><%= product.DiscountPercentage %>%</span>

              <del class="del">₹<%= product.price %></del>

            </div>

            <div class="btn-group">

              <div class="counter-wrapper">
                <button class="counter-btn" data-qty-minus>
                  <ion-icon name="remove-outline"></ion-icon>
                </button>

                <span class="span" data-qty>1</span>

                <button class="counter-btn" data-qty-plus>
                  <ion-icon name="add-outline"></ion-icon>
                </button>

              </div>
              <a>
              <button class="cart-btn"  onclick="addToCart('<%= product.id%>')">
                <ion-icon name="bag-handle-outline" aria-hidden="true"></ion-icon>

               <span class="span">Add to cart</span>
              </button>
            </a>

            </div>

          </div>

        </div>
      </section>

    </article>
  </main>





  <!-- 
    - custom js link
  -->
  <script src="/js/details.js"></script>

  <!-- 
    - ionicon link
  -->
  <script type="module" src="https://unpkg.com/ionicons@5.5.2/dist/ionicons/ionicons.esm.js"></script>
  <script nomodule src="https://unpkg.com/ionicons@5.5.2/dist/ionicons/ionicons.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/axios/1.6.8/axios.min.js" integrity="sha512-PJa3oQSLWRB7wHZ7GQ/g+qyv6r4mbuhmiDb8BjSFZ8NZ2a42oTtAq5n0ucWAwcQDlikAtkub+tPVCw4np27WCg==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>

  <script>

    async function addToCart(id){
    try {
      const response = await axios.get('/cart/'+id)
      console.log(response,"helloo");
    } catch (error) {
      console.log(error);
    }
    }

   
    
        </script>
        <script>
async function addtoheart(id) {
    try {
        const heart = await axios.post(`/addwishlist/${id}`);
        if (heart.status === 200) {
            console.log("add");

            const heartcolor = document.querySelector(".heart");

            // Use computed style to get the actual color rendered
            const currentColor = window.getComputedStyle(heartcolor).color;

            // Toggle color between red and green
            if (currentColor === 'rgb(255, 0, 0)') { // Assuming color is set as 'red'
                heartcolor.style.color = "";
                console.log("Color set to green");
            } else {
                heartcolor.style.color = "red";
                console.log("Color set to red");
            }

        } else {
            console.log("wrong");
            window.location.href = '/userlogin';
        }
    } catch (error) {
        console.log(error);
    }
}


        </script>

</body>

</html>